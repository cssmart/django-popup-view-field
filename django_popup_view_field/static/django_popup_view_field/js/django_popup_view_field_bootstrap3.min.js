if ("undefined" == typeof jQuery) throw new Error("django-popup-view-field - requires jQuery"); $(document).ready(function () { var t = 0, a = function (t, o, i, n, r) { var e = { url: i, method: n, cache: !1 }; null != r && (e.data = r); var d = $.ajax(e); d.done(function (i) { t.find(".modal-body").html(i), function (t, o) { var i = t.find(".modal-body"); i.find("*").on("click", function (i) { var n = null, r = $(this), e = r.attr("data-popup-view-value"); if (void 0 !== e && ("html()" === e && (e = r.html()) && (e = e.trim()), n = o.attr("data-target"), target = $("#" + n), i.stopPropagation(), t.modal("hide"), target.val(e)), !0 === r.is("a[href]")) { var d = r.prop("href"); return i.stopPropagation(), a(t, o, d, "GET", null), !1 } }), i.find("form").on("submit", function (i) { var n = $(this), r = n.attr("method") || "POST", e = n.attr("action") || ".", d = n.serialize(); return i.stopPropagation(), a(t, o, e, r, d), !1 }) }(t, o) }), d.fail(function (a) { throw t.modal("hide"), new Error("django-popup-view-field - Ajax request to url: " + i) }) }; $(".popup-view-btn-load").on("click", function () { var o = $(this), i = function (a) { var o = $("#template-django-popup-view-field").html(), i = $(o), n = i.attr("id") + t, r = a.attr("data-popup-dialog-title"), e = gettext("Data is loading ..."), d = gettext("Close"); return i.attr("id", n), i.find(".modal-title").html(r), i.find(".modal-body").html(e), i.find(".modal-footer-close").html(d), t++, i }(o), n = function (t) { return t.attr("data-url") }(o); i.modal({ backdrop: !1 }), i.on("hidden.bs.modal", function (t) { $(this).remove() }), a(i, o, n, "GET", null) }), $(".popup-view-btn-clear").on("click", function () { var t = $(this).attr("data-target"); $("#" + t).val("") }) });
