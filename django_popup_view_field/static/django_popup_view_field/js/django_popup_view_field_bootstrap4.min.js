if ("undefined" == typeof jQuery) throw new Error("django-popup-view-field - requires jQuery"); $(document).ready(function () { var t = function (o, a, i, n, l) { var r = { url: i, method: n, cache: !1 }; null != l && (r.data = l); var d = $.ajax(r); d.done(function (i) { o.find(".modal-body").html(i), function (o, a) { var i = o.find(".modal-body"); i.find("*").on("click", function (i) { var n = null, l = $(this), r = l.attr("data-popup-view-value"); if (void 0 !== r && ("html()" === r && (r = l.html()) && (r = r.trim()), n = a.attr("data-target"), target = $("#" + n), i.stopPropagation(), o.modal("hide"), target.val(r)), !0 === l.is("a[href]")) { var d = l.prop("href"); return i.stopPropagation(), t(o, a, d, "GET", null), !1 } }), i.find("form").on("submit", function (i) { var n = $(this), l = n.attr("method") || "POST", r = n.attr("action") || ".", d = n.serialize(); return i.stopPropagation(), t(o, a, r, l, d), !1 }) }(o, a) }), d.fail(function (t) { throw o.find(".modal-body").html(gettext("Error on loading data.")), new Error("django-popup-view-field - Ajax request to url: " + i) }) }, o = function (t) { var o = $("#django-popup-view-field-dialog"), a = gettext("Data is loading ..."), i = gettext("Close"); if (null !== t) var n = t.attr("data-popup-dialog-title"); else n = "Modal title"; return o.find(".modal-title").html(n), o.find(".modal-body").html(a), o.find(".modal-footer-close").html(i), o }; $(".popup-view-btn-load").on("click", function () { var a = $(this), i = function (t) { return t.attr("data-url") }(a); $dialog = o(a), $dialog.modal("show"), t($dialog, a, i, "GET", null), $dialog.on("hidden.bs.modal", function (t) { $dialog.modal("hide"), o(null) }) }), $(".popup-view-btn-clear").on("click", function () { var t = $(this).attr("data-target"); $("#" + t).val("") }) });
